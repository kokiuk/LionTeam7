24-02-01 기준 메모
# Service

## WeatherService

### 단기기상예보 들어오는 순서와 내용
1. TMP : 1시간 기온 | 단위 : *C
2. UUU : 풍속(동서성분) | 단위 : m/s
3. VVV : 풍속(남북성분) | 단위 : m/s
4. VEC : 풍향 | 단위 : deg
5. WSD : 풍속 | 단위 : m/s
6. SKY : 하늘상태 | 단위 : 코드값
7. PTY : 강수형태 | 단위 : 코드값
8. POP : 강수확률 | 단위 : %
9. WAV : 파고 | 단위 : M(meter)
10. PCP : 1시간 강수량 | 단위 : 범주(1mm)
11. REH : 습도 | 단위 : %
12. SNO : 1시간 신적설 | 단위 : 범주(1cm)

### 특정 요소의 코드값 및 범주
- SKY(하늘상태) : 맑음(1), 구름많음(3), 흐림(4)
- PTY(강수형태) : 없음(0), 비(1), 비/눈(2), 눈(3), 소나기(4)
- PCP(1시간 강수량) : 
  - -, null, 0값은 강수없음
  - 0.1 ~ 1mm 미만 : 1mm미만
  - 1mm이상 ~ 30mm미만 : 실수값 + mm (1.0mm ~ 2.9mm)
  - 30mm이상 ~ 50mm미만 : 실수값 + mm (30.0mm ~ 50.0mm)
  - 50mm이상 : 50.0mm 이상
    - 예를들어 PCP = 6.2일경우 강수량은 6.2mm
    - PCP = 30일 경우 강수량은 30.0mm ~ 50.0mm

- UUU(동서바람성분) : 동(+표기), 서(-표기)
- VVV(동서바람성분) : 북(+표기), 남(-표기)

### 단기기상예보 사용법
- WeatherService의 `numOfRows`에 1을 넣으면 해당시간의 TMP하나만,
2를 넣으면 해당시간의 TMP와 UUU가
13을 넣으면 해당시간의 TMP ~ SNO 와 한시간 후 의 TMP가 들어온다
  - 예를들어 base_date가 0200이고 `numOfRow = 13`이면 0200시의 TMP ~
SNP 까지의 데이터 + 0300시의 TMP 데이터가 들어온다.

## TimeService
### 시간 가져오기
- 해당 서버시간을 한국 기준시(KST)로 맞춰서 가져오게해놨지만
aws ec2에 서버를 올리면 ec2는 미국 기준시로 돌아가서 한국시간보다
-9시간이 되서 뜰 수도 있다고 한다. 일단 ec2에 올리고 문제가 생기면
그때 해결방법을 봐야할듯
- 서버 날짜와 시간을 가져와서 날짜만 사용중이고 시간은 나중에 사용예정이다.

## LocalService
### getClientIp()
- 서버에 접속하는 클라이언트의 ip를 따올 수 있다.
- 외부에서 접속하는 클라이언트만 날짜를 따오는게 가능하고 내부에서
접속하는 클라이언트는 불가능하다.
- ngrok으로 포트를 열어서 외부에서 접속을 하게 하던가
ec2에 서버를 올려서 접속을 해야 클라이언트의 ip를 확인할 수 있다.
- 스프링에서 바로 사용하려면 WeatherContoller에 `locationService.setIp()`부분에 
임의로 ip를 집어넣고 `locationService.getClientIp()`를 주석처리 해서 사용하면된다.

